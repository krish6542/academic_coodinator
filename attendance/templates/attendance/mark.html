<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Mark Attendance</title>
</head>
<body>
    <h1>Mark Attendance</h1>

        {% if messages %}
            {% for m in messages %}
                <div style="color:green">{{ m }}</div>
            {% endfor %}
        {% endif %}

    <form method="get">
        <label for="program">Filter by program:</label>
        <select name="program" id="program" onchange="this.form.submit()">
            <option value="">All programs</option>
            {% for p in programs %}
                <option value="{{ p.id }}" {% if selected_program and p.id == selected_program.id %}selected{% endif %}>{{ p.title }}</option>
            {% endfor %}
        </select>
    </form>

    <form method="post">
        {% csrf_token %}
        <table border="1" cellpadding="6" cellspacing="0">
            <thead>
                <tr>
                    <th>Student</th>
                    <th>Program</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for app in applications %}
                <tr>
                    <td>{{ app.student_name }}</td>
                    <td>{{ app.program.title }}</td>
                    <td>
                        <label><input type="radio" name="attendance_{{ app.id }}" value="present" checked> Present</label>
                        <label><input type="radio" name="attendance_{{ app.id }}" value="absent"> Absent</label>
                        <label><input type="radio" name="attendance_{{ app.id }}" value="late"> Late</label>
                    </td>
                </tr>
                {% empty %}
                <tr><td colspan="3">No enrolled students found.</td></tr>
                {% endfor %}
            </tbody>
        </table>

        <button type="submit">Save Attendance</button>
    </form>

</body>
</html>
