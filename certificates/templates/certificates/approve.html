<!DOCTYPE html>
<!DOCTYPE html>

<html class="light" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Approve Certificate</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                    },
                    fontFamily: {
                        "display": ["Lexend", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>
        body {
            font-family: 'Lexend', sans-serif;
        }
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="bg-background-light dark:bg-background-dark text-[#0d141b] dark:text-slate-100 min-h-screen flex flex-col">
<!-- Top Navigation Bar -->
<header class="sticky top-0 z-50 bg-background-light dark:bg-background-dark/95 backdrop-blur-md">
{% url 'dashboard' as dashboard_url %}
<div class="flex items-center p-4 pb-2 justify-between">
  <div class="flex items-center gap-2">
    <button aria-label="Go back" class="flex items-center gap-2 bg-transparent text-[#0d141b] dark:text-slate-100 px-2 py-2 rounded" onclick="(function(){try{var r=document.referrer; if(r && new URL(r).origin===location.origin){history.back();}else{location.href='{{ dashboard_url }}';}}catch(e){location.href='{{ dashboard_url }}';}})();return false;">
      <span class="material-symbols-outlined">arrow_back</span>
      <span class="sr-only">Back</span>
    </button>
  </div>
<h2 class="text-[#0d141b] dark:text-slate-100 text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center font-display">Approve Certificate</h2>
<div class="flex w-12 items-center justify-end">
<button class="flex cursor-pointer items-center justify-center rounded-lg h-12 bg-transparent text-[#0d141b] dark:text-slate-100 p-0">
<span class="material-symbols-outlined">filter_list</span>
</button>
</div>
</div>
</header>
<!-- Student Horizontal Selector -->
<nav class="bg-background-light dark:bg-background-dark border-b border-[#cfdbe7] dark:border-slate-800">
<div class="flex overflow-x-auto hide-scrollbar px-4 gap-6 py-2">
{% if applications %}
  {% for app in applications %}
    {% if selected_app and selected_app.id == app.id %}
      <a class="flex flex-col items-center justify-center border-b-[3px] border-b-primary text-[#0d141b] dark:text-slate-100 gap-2 pb-[10px] pt-2 shrink-0" href="?app={{ app.id }}">
        <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-12 border-2 border-primary"></div>
        <p class="text-sm font-bold leading-normal tracking-[0.015em]">{{ app.student_name|truncatechars:10 }}</p>
      </a>
    {% else %}
      <a class="flex flex-col items-center justify-center border-b-[3px] border-b-transparent text-[#4c739a] dark:text-slate-400 gap-2 pb-[10px] pt-2 shrink-0" href="?app={{ app.id }}">
        <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-12"></div>
        <p class="text-sm font-medium leading-normal tracking-[0.015em]">{{ app.student_name|truncatechars:10 }}</p>
      </a>
    {% endif %}
  {% endfor %}
{% endif %}
</div>
</nav>
<main class="flex-1 overflow-y-auto pb-32">
<!-- Certificate Info Header -->
<section class="flex p-4 mt-2">
<div class="flex w-full flex-col gap-4 items-center">
<div class="flex gap-4 flex-col items-center">
<div class="relative group">
<!-- Digital Certificate Preview -->
{% if selected_app %}
<div class="bg-white dark:bg-slate-800 shadow-xl rounded-lg p-6 border border-slate-200 dark:border-slate-700 w-full max-w-[320px] aspect-[1/1.4] flex flex-col items-center justify-center text-center relative overflow-hidden">
<div class="absolute inset-0 opacity-5 pointer-events-none bg-[radial-gradient(#137fec_1px,transparent_1px)] [background-size:16px_16px]"></div>
<div class="z-10 flex flex-col items-center">
<span class="material-symbols-outlined text-primary text-5xl mb-4">verified_user</span>
<h4 class="text-xs uppercase tracking-widest text-slate-400 font-bold mb-6">Official Certificate</h4>
<p class="text-[10px] text-slate-500 mb-1">THIS CERTIFIES THAT</p>
<p class="text-xl font-bold text-[#0d141b] dark:text-slate-100 mb-4 font-display">{{ selected_app.student_name }}</p>
<p class="text-[10px] text-slate-500 mb-1">HAS SUCCESSFULLY COMPLETED THE</p>
<p class="text-sm font-semibold text-primary mb-6">{{ selected_app.program.title }}</p>
<div class="w-16 h-px bg-slate-200 dark:bg-slate-700 mb-6"></div>
<div class="flex justify-between w-full px-4 gap-4">
<div class="flex flex-col items-center">
<div class="w-12 h-6 bg-slate-100 dark:bg-slate-900 rounded mb-1"></div>
<p class="text-[8px] text-slate-400">Director Signature</p>
</div>
<div class="flex flex-col items-center">
<div class="w-12 h-6 bg-slate-100 dark:bg-slate-900 rounded mb-1"></div>
<p class="text-[8px] text-slate-400">Date Issued</p>
</div>
</div>
</div>
</div>
<div class="absolute bottom-2 right-2 bg-primary text-white p-2 rounded-full shadow-lg">
<span class="material-symbols-outlined text-sm">zoom_in</span>
</div>
{% else %}
<div class="p-6 bg-white rounded-lg shadow">No approved application selected.</div>
{% endif %}
</div>
<div class="flex flex-col items-center justify-center mt-2">
{% if selected_app %}
<p class="text-[#0d141b] dark:text-slate-100 text-[22px] font-bold leading-tight tracking-[-0.015em] text-center font-display">Certificate of Completion</p>
<p class="text-[#4c739a] dark:text-slate-400 text-base font-normal leading-normal text-center">{{ selected_app.program.title }}</p>
<p class="text-[#4c739a] dark:text-slate-400 text-sm font-normal leading-normal text-center">Student ID: {{ selected_app.id }}</p>
{% endif %}
</div>
</div>
</div>
</section>
<!-- Details List -->
<section>
<h3 class="text-[#0d141b] dark:text-slate-100 tracking-light text-xl font-bold leading-tight px-4 text-left pb-2 pt-4 font-display">Review Details</h3>
<div class="p-4 bg-white dark:bg-slate-900/50 mx-4 rounded-xl shadow-sm border border-slate-100 dark:border-slate-800">
{% if selected_app %}
<div class="flex justify-between gap-x-6 py-2 border-b border-slate-50 dark:border-slate-800">
<p class="text-[#4c739a] dark:text-slate-400 text-sm font-normal leading-normal">Student Name</p>
<p class="text-[#0d141b] dark:text-slate-100 text-sm font-semibold leading-normal text-right">{{ selected_app.student_name }}</p>
</div>
<div class="flex justify-between gap-x-6 py-2 border-b border-slate-50 dark:border-slate-800">
<p class="text-[#4c739a] dark:text-slate-400 text-sm font-normal leading-normal">Course</p>
<p class="text-[#0d141b] dark:text-slate-100 text-sm font-semibold leading-normal text-right">{{ selected_app.program.title }}</p>
</div>
<div class="flex justify-between gap-x-6 py-2 border-b border-slate-50 dark:border-slate-800">
<p class="text-[#4c739a] dark:text-slate-400 text-sm font-normal leading-normal">Applied On</p>
<p class="text-[#0d141b] dark:text-slate-100 text-sm font-semibold leading-normal text-right">{{ selected_app.applied_on }}</p>
</div>
<div class="flex justify-between gap-x-6 py-2 border-b border-slate-50 dark:border-slate-800">
<p class="text-[#4c739a] dark:text-slate-400 text-sm font-normal leading-normal">Email</p>
<p class="text-[#0d141b] dark:text-slate-100 text-sm font-semibold leading-normal text-right">{{ selected_app.email }}</p>
</div>
{% else %}
  <p class="p-4">No approved applications yet.</p>
{% endif %}
</div>
</section>
<!-- Additional Verification Checklist (Custom) -->
<section class="px-4 mt-6">
<h3 class="text-[#0d141b] dark:text-slate-100 text-sm font-bold uppercase tracking-wider mb-3">Verification Checklist</h3>
<div class="space-y-3">
<div class="flex items-center gap-3 bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-100 dark:border-green-900/30">
<span class="material-symbols-outlined text-green-600 dark:text-green-400 text-lg">check_circle</span>
<p class="text-sm text-green-800 dark:text-green-300">Final internship report submitted</p>
</div>
<div class="flex items-center gap-3 bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-100 dark:border-green-900/30">
<span class="material-symbols-outlined text-green-600 dark:text-green-400 text-lg">check_circle</span>
<p class="text-sm text-green-800 dark:text-green-300">Company feedback form received</p>
</div>
{% if certificate and certificate.approved %}
  <div class="flex items-center gap-3 bg-green-50 dark:bg-green-900/20 p-3 rounded-lg border border-green-100 dark:border-green-900/30">
    <span class="material-symbols-outlined text-green-600 dark:text-green-400 text-lg">verified</span>
    <p class="text-sm text-green-800 dark:text-green-300">Certificate issued on {{ certificate.approved_on }}</p>
  </div>
{% else %}
  <div class="flex items-center gap-3 bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg border border-yellow-100 dark:border-yellow-900/30">
    <span class="material-symbols-outlined text-yellow-600 dark:text-yellow-400 text-lg">pending</span>
    <p class="text-sm text-yellow-800 dark:text-yellow-300">Pending Academic Coordinator final review</p>
  </div>
{% endif %}
</div>
</section>
</main>
<!-- Sticky Footer Actions -->
<footer class="fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-background-dark/80 backdrop-blur-xl border-t border-[#cfdbe7] dark:border-slate-800 p-4 pb-8">
<div class="flex flex-col gap-3 max-w-md mx-auto">
  {% if selected_app %}
    <form method="post">
      {% csrf_token %}
      <input type="hidden" name="application_id" value="{{ selected_app.id }}">
      <input type="hidden" name="action" value="approve">
      <button class="w-full bg-primary hover:bg-primary/90 text-white font-bold py-4 rounded-xl shadow-lg flex items-center justify-center gap-2 transition-all" type="submit">
        <span class="material-symbols-outlined">verified</span>
        Approve &amp; Issue Certificate
      </button>
    </form>
    <form method="post">
      {% csrf_token %}
      <input type="hidden" name="application_id" value="{{ selected_app.id }}">
      <input type="hidden" name="action" value="reject">
      <button class="w-full bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 text-[#4c739a] dark:text-slate-400 font-bold py-3 rounded-xl flex items-center justify-center gap-2 transition-all border border-slate-200 dark:border-slate-700" type="submit">
        <span class="material-symbols-outlined">edit_note</span>
        Reject / Request Revision
      </button>
    </form>
  {% else %}
    <div class="text-center text-sm text-slate-500">Select an approved application to approve or reject.</div>
  {% endif %}
</div>
</footer>
</body></html>
